<h3 style="text-align:center">Policy Review</h3>
<p-growl [value]="msgs"></p-growl>
<div class="row">
    <div class="col-xs-12">
        <div class="col-xs-12">
            <div class="col-xs-4 form-group">
                <label>Collection Name :</label>
                <p-dropdown [options]="collection_names" [(ngModel)]="collection_selected_name"
                            [style]="{'width':'150px'}" (onChange)="onSelectCollectionName($event.value)"></p-dropdown>
            </div>
            <div class="col-xs-4 form-group">
                <label>Action :</label>
                <p-dropdown [options]="actions" [(ngModel)]="selected_action"></p-dropdown>
            </div>
            <div class="col-xs-4 form-group">
                <label>Policy Type :</label>
                <p-dropdown [options]="policy_types" [(ngModel)]="selected_policy_type"></p-dropdown>
            </div>
        </div>
    </div>
    <div class="col-xs-12">
        <div class="col-xs-12">
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="padding-right:28px">Subject Field: </label>
                <p-dropdown [options]="subject_fields" [(ngModel)]="selected_subject_field" [style]="{'width':'150px'}"></p-dropdown>
            </div>
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="padding-right:13px">Value: </label>
                <input type="text" size="25" pInputText [(ngModel)]="constant_subject_value" />
            </div>
            <div class="col-xs-4 col-lg-1 form-group" style="padding-top:25px">
                <button class="ui-button-warning" pButton type="button" label="Add" (click)="add_subject_field()"></button>
            </div>
            <div class="col-xs-4 col-lg-5 form-group">
                <label style="padding-right:13px">Result: </label>
                <textarea style="border-color: black" rows="1" cols="60" pInputTextarea
                          [(ngModel)]="subject_result" [disabled]="true"></textarea>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="padding-right:13px">Resource Field: </label>
                <p-dropdown [options]="resource_fields" [(ngModel)]="resource_selected_field" [style]="{'width':'150px'}"></p-dropdown>
            </div>
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="padding-right:13px">Value: </label>
                <input type="text" size="25" pInputText [(ngModel)]="constant_resource_value" />
            </div>
            <div class="col-xs-4 col-lg-1 form-group" style="padding-top:25px">
                <button class="ui-button-warning" pButton type="button" label="Add" (click)="add_resource_field()"></button>
            </div>
            <div class="col-xs-4 col-lg-5 form-group">
                <label style="padding-right:13px">Result: </label>
                <textarea style="border-color: black" rows="1" cols="60" pInputTextarea
                          [(ngModel)]="resource_result" [disabled]="true"></textarea>
            </div>
        </div>

        <div class="col-xs-12">
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="">Environment Field: </label>
                <input type="text" size="17" pInputText [(ngModel)]="environment_field" />
            </div>
            <div class="col-xs-4 col-lg-3 form-group">
                <label style="padding-right:13px">Value: </label>
                <input type="text" size="25" pInputText [(ngModel)]="constant_environment_value" />
            </div>
            <div class="col-xs-4 col-lg-1 form-group" style="padding-top:25px">
                <button class="ui-button-warning" pButton type="button" label="Add" (click)="add_environment_value()"></button>
            </div>
            <div class="col-xs-4 col-lg-5 form-group">
                <label style="padding-right:13px">Result: </label>
                <textarea style="border-color: black" rows="1" cols="60" pInputTextarea
                          [(ngModel)]="environment_result" [disabled]="true"></textarea>
            </div>
        </div>
    </div>
    <div class="col-lg-12 text-center">
        <div class="col-lg-offset-1 col-lg-5">
            <button class="btn btn-success btn-lg" type="button" style="height:90%" (click)="submit()">Submit</button>
        </div>
        <div class="col-lg-offset-0 col-lg-5">
            <button class="btn btn-danger btn-lg" type="button" style="height:90%" (click)="clear()">Clear</button>
        </div>
    </div>
    <div class="col-lg-12" *ngIf="access_controls.length > 0" style="padding-top:15px">
        <p-dataTable [value]="access_controls" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[10,20,50]" [rows]="10">
            <p-column field="PolicyID" header="Policy ID" [sortable]="true" [filter]="true" filterMatchMode="contains"></p-column>
            <p-column field="Description" header="Description" [filter]="true" filterMatchMode="contains"></p-column>
            <p-column field="CollectionName" header="Collection Name" [sortable]="true" [filter]="true" filterMatchMode="contains"></p-column>
            <p-column field="RuleCombining" header="Rule Combining" [sortable]="true" [filter]="true" filterMatchMode="contains"></p-column>
            <p-column field="Action" header="Action" [sortable]="true" [filter]="true" filterMatchMode="contains"></p-column>
            <p-column styleClass="col-button">
                <template let-car="rowData" pTemplate="body">
                    <button type="button" pButton (click)="select_access_control(car)" icon="fa-share"></button>
                </template>
            </p-column>
            <p-column styleClass="col-button">
                <template let-car="rowData" pTemplate="body">
                    <button type="button" class="ui-button-danger" pButton (click)="delete_privacy_policy(car)" icon="fa-trash"></button>
                </template>
            </p-column>
        </p-dataTable>
    </div>
    <div class="col-xs-12" *ngIf="result.length > 0">
        <table class="table table-bordered table-responsive table-striped">
            <thead>
                <tr>
                    <th>Policy ID</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of result">
                    <td>{{row}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>